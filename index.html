<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EVO Roda Bertuah</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Segoe UI',Tahoma,sans-serif;
  background:linear-gradient(135deg,#667eea,#764ba2);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}
.card{
  background:#fff;
  max-width:420px;
  width:100%;
  border-radius:28px;
  padding:32px 28px;
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
}
h1{margin-bottom:12px;font-size:24px}

.wheel-wrapper{
  position:relative;
  width:300px;
  height:300px;
  margin:20px auto;
}
.arrow{
  position:absolute;
  top:-12px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:18px solid transparent;
  border-right:18px solid transparent;
  border-top:28px solid #ff4757;
  z-index:10;
}
svg{
  width:100%;
  height:100%;
  border-radius:50%;
  border:8px solid #333;
  transition:transform 4.5s cubic-bezier(.17,.67,.12,.99);
  transform-origin:50% 50%;
}

.center{
  position:absolute;
  width:70px;
  height:70px;
  background:#fff;
  border-radius:50%;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:5;
  box-shadow:0 4px 15px rgba(0,0,0,.2);
}

input,button{
  width:100%;
  padding:14px;
  margin-top:15px;
  border-radius:12px;
  font-size:16px;
}
button{
  background:#764ba2;
  color:#fff;
  border:none;
  font-weight:700;
  cursor:pointer;
}
button:disabled{background:#aaa}

.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  justify-content:center;
  align-items:center;
}
.modal.show{display:flex}
.modal-content{
  background:#fff;
  padding:30px;
  border-radius:20px;
  text-align:center;
}
</style>
</head>

<body>

<div class="card">
  <h1>üéâ EVO Roda Bertuah üéâ</h1>

  <input id="debtor" placeholder="Masukkan Kod Debtor"/>

  <div class="wheel-wrapper">
    <div class="arrow"></div>

    <svg id="wheel" viewBox="0 0 300 300">
      <g id="wheelGroup" transform="translate(150,150)"></g>
    </svg>

    <div class="center">üéÅ</div>
  </div>

  <button id="spinBtn">Putar Sekarang</button>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <h2>Tahniah üéâ</h2>
    <p id="prizeText" style="font-size:20px;font-weight:bold"></p>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
const prizes = [
  { text:"TR12 / CM 1 Paket", color:"#FFD93D", weight:60 },
  { text:"TR12 / CM 2 Paket", color:"#6BCB77", weight:25 },
  { text:"TR12 / CM 3 Paket", color:"#4D96FF", weight:15 }
];

const wheel = document.getElementById("wheel");
const group = document.getElementById("wheelGroup");
const spinBtn = document.getElementById("spinBtn");
const prizeText = document.getElementById("prizeText");
const modal = document.getElementById("modal");

const angle = 360 / prizes.length;
const radius = 130;

prizes.forEach((p,i)=>{
  const start=i*angle, end=start+angle;
  const x1=radius*Math.cos(Math.PI*start/180);
  const y1=radius*Math.sin(Math.PI*start/180);
  const x2=radius*Math.cos(Math.PI*end/180);
  const y2=radius*Math.sin(Math.PI*end/180);

  const path=document.createElementNS("http://www.w3.org/2000/svg","path");
  path.setAttribute("d",`M0 0 L${x1} ${y1} A${radius} ${radius} 0 0 1 ${x2} ${y2} Z`);
  path.setAttribute("fill",p.color);
  group.appendChild(path);

  const text=document.createElementNS("http://www.w3.org/2000/svg","text");
  const mid=start+angle/2;
  text.setAttribute("x",(radius-40)*Math.cos(Math.PI*mid/180));
  text.setAttribute("y",(radius-40)*Math.sin(Math.PI*mid/180));
  text.setAttribute("fill","#fff");
  text.setAttribute("font-size","14");
  text.setAttribute("font-weight","700");
  text.setAttribute("text-anchor","middle");
  text.setAttribute("dominant-baseline","middle");
  text.textContent=p.text;
  group.appendChild(text);
});

function weightedPick(){
  const sum=prizes.reduce((s,p)=>s+p.weight,0);
  let r=Math.random()*sum;
  for(let i=0;i<prizes.length;i++){
    r-=prizes[i].weight;
    if(r<=0) return i;
  }
  return 0;
}

let currentRotation = 0;
let spinning=false;

function spin(){
  if(spinning) return;
  spinning=true;
  spinBtn.disabled=true;

  const index=weightedPick();
  const target=index*angle+angle/2;
  currentRotation += 360*6 - target - 90;

  wheel.style.transform = `rotate(${currentRotation}deg)`;

  setTimeout(()=>{
    prizeText.innerText=prizes[index].text;
    modal.classList.add("show");
    spinning=false;
    spinBtn.disabled=false;
  },4600);
}

function closeModal(){
  modal.classList.remove("show");
}

spinBtn.onclick=spin;
</script>
</body>
</html>
